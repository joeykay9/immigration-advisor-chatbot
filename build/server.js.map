{"version":3,"sources":["../src/server.js"],"names":["dotenv","config","app","bodyParserJSON","bodyParser","json","bodyParserURLEncoded","urlencoded","extended","use","get","req","res","send","post","console","log","body","name","Field_name_Value","responseObject","nationality","eea_countries","eea_nationalities","isEAA","string","toLowerCase","tasks","find","listen","process","env","PORT"],"mappings":"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","sourcesContent":["import dotenv from \"dotenv\"\r\nimport express from \"express\"\r\nimport bodyParser from 'body-parser'\r\n\r\ndotenv.config()\r\n\r\nconst app = express()\r\nconst bodyParserJSON = bodyParser.json();\r\nconst bodyParserURLEncoded = bodyParser.urlencoded({ extended: true });\r\n\r\napp.use(bodyParserJSON);\r\napp.use(bodyParserURLEncoded);\r\n\r\napp.get('/', (req, res) => res.send('Hello World!'))\r\n\r\napp.post('/name-response', (req, res) => {\r\n    \r\n    console.log(req.body)\r\n\r\n    let name = req.body.Field_name_Value\r\n    \r\n    const responseObject = {\r\n        \"actions\": [\r\n            {\r\n                \"say\": name + \" ðŸ˜Š. That's a lovely name.\"\r\n            },\r\n            {\r\n                \"say\": \"What is your nationality or which country are you from?\"\r\n            },\r\n            {\r\n                \"listen\": {\r\n                    \"tasks\": [\r\n                        \"respond_to_nationality\"\r\n                    ]\r\n                }\r\n            },\r\n        ]\r\n    };\r\n    \r\n    return res.json(responseObject)\r\n})\r\n\r\napp.post('/nationality-response', (req, res) => {\r\n\r\n    let nationality = req.body.Field_name_Value\r\n\r\n    console.log(nationality)\r\n    \r\n    let eea_countries = [\"Austria\", \"Belgium\", \"Bulgaria\", \"Croatia\", \"Cyprus\", \"Republic of Cyprus\", \"Czech Republic\", \r\n                \"Denmark\", \"Estonia\", \"Finland\", \"France\", \"Germany\", \"Greece\", \"Hungary\", \"Iceland\", \"Ireland\", \"Italy\", \"Latvia\", \r\n                \"Liechtenstein\", \"Lithuania\", \"Luxembourg\", \"Malta\", \"Netherlands\", \"Norway\", \"Poland\", \r\n                \"Portugal\", \"Romania\", \"Slovakia\", \"Slovenia\", \"Spain\", \"Sweden\", \"Switzerland\"]\r\n\r\n    let eea_nationalities = [\"Austrian\", \"Belgian\", \"Bulgarian\", \"Croatian\", \"Cypriot\", \"Czech\", \"Danish\", \"Estonian\",\r\n                \"Finnish\", \"French\", \"German\", \"Greek\", \"Hungarian\", \"Icelandic\", \"Irish\", \"Italian\", \"Latvian\", \r\n                \"Liechtenstein\", \"Lithuanian\", \"Luxembourger\", \"Maltese\", \"Dutch\", \"Norwegian\", \"Polish\", \r\n                \"Portugese\", \"Romanian\", \"Slovak\", \"Slovenian\", \"Spanish\", \"Swedish\", \"Swiss\"]\r\n    \r\n    function isEAA(string){\r\n        return string.toLowerCase() == nationality.toLowerCase()\r\n    }      \r\n    \r\n    let responseObject = {\r\n        \"actions\": [\r\n    \t\t{\r\n    \t\t\t\"say\": \"Ok. Great.\"\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t\"say\": \"Why do you want to come to the UK?\"\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t\"listen\": {\r\n    \t\t\t    tasks: [\r\n    \t\t\t        \"respond_to_purpose_for_entry\"\r\n    \t\t        ]\r\n    \t\t\t}\r\n    \t\t},\r\n        ]\r\n    };\r\n    \r\n    if(eea_countries.find(isEAA) || eea_nationalities.find(isEAA)){\r\n        responseObject = {\r\n            \"actions\": [\r\n        \t\t{\r\n        \t\t\t\"say\": \"You do not need a visa to come to the UK. ðŸ˜Š\"\r\n        \t\t},\r\n        \t\t{\r\n        \t\t\t\"redirect\": \"task://goodbye\"\r\n        \t\t}\r\n            ]\r\n        };\r\n    }\r\n    \r\n    return res.json(responseObject)\r\n})\r\n\r\napp.listen(process.env.PORT, () => console.log(`Example app listening at http://localhost:${process.env.PORT}`))"],"file":"server.js"}